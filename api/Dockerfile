FROM --platform=$BUILDPLATFORM golang:1.22.3

WORKDIR /app
COPY . .

ARG TARGETOS
ARG TARGETARCH
ENV GOOS=$TARGETOS
ENV GOARCH=$TARGETARCH
RUN go build -o go-api
EXPOSE 8080
CMD ["./go-api"]
